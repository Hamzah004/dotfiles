#!/bin/bash

# ðŸš€ Step 1: Check if Git is installed
if ! command -v git &> /dev/null; then
  echo "âŒ Error: Git is not installed. Please install Git and try again."
  exit 1
fi

# ðŸš€ Step 2: Validate Input
if [[ $# -ne 1 ]]; then
  echo "Usage: Git SSH URL is Rrequired"
  exit 1
fi

ssh_url=$1

# ðŸš€ Step 3: Check if Git SSH is configured
if ! ssh -T git@github.com 2>&1 | grep -q "successfully authenticated"; then
  echo "âŒ Error: GitHub SSH authentication failed. Make sure your SSH key is added to GitHub."
  exit 1
fi

# ðŸš€ Step 4: Ensure the script isn't run in an already initialized repo
if [ -d ".git" ]; then
  echo "âŒ Error: This directory is already a Git repository."
  exit 1
fi

# ðŸš€ Step 5: Get README Content (Multi-line input)
echo "ðŸ“„ Enter README content (Press Ctrl+D to save):"
cat > README.md

# ðŸš€ Step 6: Initialize Git and push to GitHub
echo "ðŸš€ Initializing Git repository..."
git init
git add README.md
git commit -m "Initial commit"

# ðŸš€ Step 7: Set up the remote repository
git branch -M main
git remote add origin "$ssh_url"

# ðŸš€ Step 8: Push to GitHub
git push -u origin main

echo "âœ… Repository successfully created and pushed to GitHub!"
